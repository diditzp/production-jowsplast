{
    "elements": [
        {
            "className": "org.joget.plugin.enterprise.HtmlCodeComponent",
            "properties": {
                "attr-data-events-listening": [],
                "textContent": "<style>\n    .modal-jumlah {\n        position: fixed;\n        top: 0;\n        right: 0;\n        left: 0;\n        bottom: 0;\n        background: rgba(0,0,0,0.5);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 9999;\n    }\n    .jumlah-copy .modal-container {\n        /*width: 480px;*/\n        /*height: 360px;*/\n        background: white;\n        border-radius: 8px;\n        padding: 24px 20px 12px;\n    }\n    .jumlah-copy {\n        display: none;\n    }\n    .modal-jumlah .btn-cancel-modal {\n        width: 124px;\n        height: 40px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        color: #00487A;\n        border-radius: 8px;\n        background: white;\n        font-size: 14px;\n        font-weight: 500;\n        border: 1px solid #00487A;\n        cursor: pointer;\n    }\n    .modal-jumlah .btn-submit-modal {\n        width: 124px;\n        height: 40px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        background: #00487A;\n        border-radius: 8px;\n        color: white;\n        font-size: 14px;\n        font-weight: 500;\n        cursor: pointer;\n    }\n<\/style>\n\n<button id=\"printLabel\" name=\"printLabel\" style=\"color: #FFFFFF;background-color: #00487A !important;border-color: #00487A !important;float: left;font-weight: bold;border-radius: 0.25rem;\">Print Label<\/button>\n<div id=\"containerr-data\">\n    <div id=\"containerr\"><\/div>\n    <div id=\"additionalData\"><\/div>\n<\/div>\n\n<form id=\"modal-jumlah-copy\" class=\"modal-jumlah jumlah-copy\">\n    <div class=\"modal-container\">\n        <div style=\"font-size: 18px; font-weight: 500; color: #1D2939; margin-bottom: 8px;\">Masukkan Jumlah Copy Label<\/div>\n        <input style=\"width: 100%; margin-bottom: 32px;\" class=\"input-jumlah-copy\">\n        <div style=\"display: flex; justify-content: flex-end; gap: 12px\">\n            <div class=\"btn-cancel-modal\">Cancel<\/div>\n            <div class=\"btn-submit-modal\">Submit<\/div>\n        <\/div>\n    <\/div>\n<\/form>\n\n<script type=\"text/javascript\" src=\"#appResource.qrcode.min.js#\"><\/script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/canvg/3.0.7/umd.min.js\"><\/script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js\"><\/script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.13/jspdf.plugin.autotable.min.js\"><\/script>\n<script>\n    $(document).ready(function() {\n        \n        $('.select_checkbox').closest('thead').find('input[type=checkbox]').hide();\n        $('.filters').prepend($('#printLabel'));\n        let containerIndex = 0;\n        var tanggalPrint = '#dateLocale.yyyy-MM-dd HH:mm#';\n        \n        $('[name=printLabel]').on('click', function(e) {\n            e.preventDefault();\n            $('.jumlah-copy').css({'display':'flex'});\n        });\n        \n        $('.jumlah-copy .btn-submit-modal').on('click', function() {\n            // $('#pc-BDC0DCE992614A74B202F868258B6CA5').hide();\n            var checked = $('[name=d-6514584-checkbox_id]:checked');\n\n            checked.each(function(){\n                var idQr = $(this).closest('tr').find('.column_nama_produk').text();\n                var namaSkuVal = $(this).closest('tr').find('.column_nama_sku').text();\n                var idProduksi = $(this).closest('tr').find('.column_id_produksi_botol').text();\n                var isiPcs = $(this).closest('tr').find('.column_isi_per_ball_produksi').text();\n                var shift = $(this).closest('tr').find('.column_shift').text();\n                var pegawai = $(this).closest('tr').find('.column_employee').text();\n                var tanggal = $(this).closest('tr').find('.column_tanggalMasukGudang').text();\n                \n                createNewContainer(idQr, namaSkuVal, idProduksi, isiPcs, shift, pegawai, tanggal);\n                generateQRCode(idQr);\n            });  \n            \n            $('.jumlah-copy').css({'display':'none'});\n            printLabel();\n            $('[name=d-6514584-checkbox_id]:checked').prop('checked', false);\n            $('.containerr-data').remove();\n        });\n        \n        $('.jumlah-copy .btn-cancel-modal').on('click', function() {\n            $('.jumlah-copy').css({'display':'none'});\n        });\n        \n        function createNewContainer(idQr, namaSkuVal, idProduksi, isiPcs, shift, pegawai, tanggal) {\n            containerIndex++;\n    \n            var newContainer = `\n                <div class=\"containerr-data\" id=\"containerr-data-${containerIndex}\" style=\"display: flex; align-items: center; width: 20cm;\">\n                    <div class=\"containerr\" id=\"containerr-${containerIndex}\" style=\"width: 5cm; height: 5cm;\"><\/div>\n                    <div class=\"additionalData\" style=\"width: 10cm; display: flex; flex-direction: column; justify-content: center;\">\n                        <table border=\"1\" cellpadding=\"5\">\n                            <tbody style=\"text-align: center;\">\n                                <tr>\n                                    <td id=\"namaSkuVal-${containerIndex}\" colspan=\"3\" style=\"font-weight: bold;\">${namaSkuVal}<\/td>\n                                <\/tr>\n                                <tr>\n                                    <td id=\"idProduksi-${containerIndex}\" colspan=\"3\" style=\"font-weight: bold;\">${idProduksi}<\/td>\n                                <\/tr>\n                                <tr>\n                                    <td id=\"isiPcs-${containerIndex}\" colspan=\"3\" style=\"font-weight: bold;\">${isiPcs} PCS<\/td>\n                                <\/tr>\n                                <tr>\n                                    <th>Pegawai<\/th>\n                                    <th>Tanggal<\/th>\n                                    <th>Shift<\/th>\n                                <\/tr>\n                                <tr>\n                                    <td id=\"pegawai-${containerIndex}\">${pegawai}<\/td>\n                                    <td id=\"tanggal-${containerIndex}\">${tanggal}<\/td>\n                                    <td id=\"shift-${containerIndex}\">${shift}<\/td>\n                                <\/tr>\n                            <\/tbody>\n                        <\/table>\n                    <\/div>\n                <\/div>\n            `;\n    \n            $('#containerr-data').append(newContainer);\n        }\n    \n        function generateQRCode(idQr) {\n            if (!idQr.startsWith(\"#\")) {\n                $(\"#containerr\").show();\n                $(\"#printOptions\").show();\n                \n                var qrcode = new QRCode({\n                    content: idQr,\n                    container: \"svg-viewbox\",\n                    join: true,\n                    width: 100,\n                    height: 100\n                });\n                var svg = qrcode.svg();\n                document.getElementById(`containerr-${containerIndex}`).innerHTML = svg;\n                // document.getElementById(\"containerrExplain\").innerHTML = \"Scan this QR Code\";\n                // document.getElementById(\"containerText\").innerHTML = namaProduk;\n            }\n        }\n        \n        function printLabel() {\n            const printContents = document.getElementById(\"containerr-data\").innerHTML;\n            const printWindow = window.open('', '', 'width=500,height=500');\n            printWindow.document.write('<html><head><title>');\n            printWindow.document.write('Print Label Produksi'+' / ');\n            printWindow.document.write(tanggalPrint);\n            printWindow.document.write('<\/title>');\n            printWindow.document.write('<style>');\n            printWindow.document.write('@media print { body { margin: 0; } }');\n            printWindow.document.write('#containerr-data { display: flex; align-items: center; flex-direction: column; }');\n            printWindow.document.write('.containerr { width: 5cm; height: 5cm; }'); \n            printWindow.document.write('.additionalData { width: 10cm; display: flex; flex-direction: column; justify-content: center; }');\n            printWindow.document.write('table { border-collapse: collapse; width: 100%; }'); \n            printWindow.document.write('<\/style>');\n            printWindow.document.write('<\/head><body>');\n            printWindow.document.write('<div id=\"containerr-data\">' + printContents + '<\/div>'); \n            printWindow.document.write('<\/body><\/html>');\n            printWindow.document.close();\n            printWindow.print();\n            printWindow.close();\n        }\n    });\n<\/script>",
                "id": "BDC0DCE992614A74B202F868258B6CA5",
                "customId": ""
            }
        },
        {"className": "menu-component"}
    ],
    "className": "org.joget.apps.userview.model.UserviewPage",
    "properties": {"id": "up-DC98F74366944B288F4CD229C3CF47BB"}
}