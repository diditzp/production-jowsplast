{
    "elements": [
        {
            "className": "org.joget.plugin.enterprise.HtmlCodeComponent",
            "properties": {
                "attr-data-events-listening": [],
                "textContent": "<button id=\"printLabel\" name=\"printLabel\" style=\"color: #FFFFFF;background-color: #00487A !important;border-color: #00487A !important;float: left;font-weight: bold;border-radius: 0.25rem;\">Print Label<\/button>\n<div id=\"containerr-data\">\n    <div id=\"containerr\"><\/div>\n    <div id=\"additionalData\"><\/div>\n<\/div>\n\n<script>\n    $(document).ready(function() {\n        \n        $('.filters').prepend($('#printLabel'));\n        let containerIndex = 0;\n        var namaSkuVal;\n        var tanggal;\n        \n        $('[name=printLabel]').on('click', function(e) {\n            e.preventDefault();\n            var checked = $('[name=d-6514584-checkbox_id]:checked');\n\n            checked.each(function(){\n                var idQr = $(this).closest('tr').find('.column_id').text();\n                namaSkuVal = $(this).closest('tr').find('.column_nama_sku').text();\n                var idProduksi = $(this).closest('tr').find('.column_id_produksi_botol').text();\n                var isiPcs = $(this).closest('tr').find('.column_isi_per_ball_produksi').text();\n                var shift = $(this).closest('tr').find('.column_shift').text();\n                var pegawai = $(this).closest('tr').find('.column_employee').text();\n                tanggal = $(this).closest('tr').find('.column_tanggalMasukGudang').text();\n                console.log(idQr);\n                console.log(namaSkuVal);\n                console.log(idProduksi);\n                console.log(isiPcs);\n                console.log(shift);\n                console.log(pegawai);\n                console.log(tanggal);\n                \n                createNewContainer(idQr, namaSkuVal, idProduksi, isiPcs, shift, pegawai, tanggal);\n                generateQRCode(idQr);\n                printLabel();\n            })  \n        });\n        \n        function createNewContainer(idQr, namaSkuVal, idProduksi, isiPcs, shift, pegawai, tanggal) {\n            containerIndex++;\n    \n            var newContainer = `\n                <div class=\"containerr-data\" id=\"containerr-data-${containerIndex}\" style=\"display: flex; align-items: center; width: 20cm;\">\n                    <div class=\"containerr\" id=\"containerr-${containerIndex}\" style=\"width: 5cm; height: 5cm;\"><\/div>\n                    <div class=\"additionalData\" style=\"width: 10cm; display: flex; flex-direction: column; justify-content: center;\">\n                        <table border=\"1\" cellpadding=\"5\">\n                            <tbody style=\"text-align: center;\">\n                                <tr>\n                                    <td id=\"namaSkuVal-${containerIndex}\" colspan=\"3\" style=\"font-weight: bold;\">${namaSkuVal}<\/td>\n                                <\/tr>\n                                <tr>\n                                    <td id=\"idProduksi-${containerIndex}\" colspan=\"3\" style=\"font-weight: bold;\">${idProduksi}<\/td>\n                                <\/tr>\n                                <tr>\n                                    <td id=\"isiPcs-${containerIndex}\" colspan=\"3\" style=\"font-weight: bold;\">${isiPcs} PCS<\/td>\n                                <\/tr>\n                                <tr>\n                                    <th>Pegawai<\/th>\n                                    <th>Tanggal<\/th>\n                                    <th>Shift<\/th>\n                                <\/tr>\n                                <tr>\n                                    <td id=\"pegawai-${containerIndex}\">${pegawai}<\/td>\n                                    <td id=\"tanggal-${containerIndex}\">${tanggal}<\/td>\n                                    <td id=\"shift-${containerIndex}\">${shift}<\/td>\n                                <\/tr>\n                            <\/tbody>\n                        <\/table>\n                    <\/div>\n                <\/div>\n            `;\n    \n            $('#containerr-data').append(newContainer);\n        }\n    \n        function generateQRCode(idQr) {\n            if (!idQr.startsWith(\"#\")) {\n                $(\"#containerr\").show();\n                $(\"#printOptions\").show();\n                \n                var qrcode = new QRCode({\n                    content: id,\n                    container: \"svg-viewbox\",\n                    join: true,\n                    width: 100,\n                    height: 100\n                });\n                var svg = qrcode.svg();\n                document.getElementById(`containerr-${containerIndex}`).innerHTML = svg;\n                // document.getElementById(\"containerrExplain\").innerHTML = \"Scan this QR Code\";\n                // document.getElementById(\"containerText\").innerHTML = namaProduk;\n            }\n        }\n        \n        function printLabel() {\n            const printContents = document.getElementById(\"containerr-data\").innerHTML;\n            const printWindow = window.open('', '', 'width=500,height=500');\n            printWindow.document.write('<html><head><title>');\n            printWindow.document.write(namaSkuVal+' / ');\n            printWindow.document.write(tanggal);\n            printWindow.document.write('<\/title>');\n            printWindow.document.write('<style>');\n            printWindow.document.write('@media print { body { margin: 0; } }');\n            printWindow.document.write('#containerr-data { display: flex; align-items: center; flex-direction: column; }');\n            printWindow.document.write('.containerr { width: 5cm; height: 5cm; }'); \n            printWindow.document.write('.additionalData { width: 10cm; display: flex; flex-direction: column; justify-content: center; }');\n            printWindow.document.write('table { border-collapse: collapse; width: 100%; }'); \n            printWindow.document.write('<\/style>');\n            printWindow.document.write('<\/head><body>');\n            printWindow.document.write('<div id=\"containerr-data\">' + printContents + '<\/div>'); \n            printWindow.document.write('<\/body><\/html>');\n            printWindow.document.close();\n            printWindow.print();\n            printWindow.close();\n        }\n    });\n<\/script>",
                "id": "BDC0DCE992614A74B202F868258B6CA5",
                "customId": ""
            }
        },
        {"className": "menu-component"}
    ],
    "className": "org.joget.apps.userview.model.UserviewPage",
    "properties": {"id": "up-DC98F74366944B288F4CD229C3CF47BB"}
}